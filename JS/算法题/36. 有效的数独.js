/**
 * 输入：board = 
[["5","3",".",".","7",".",".",".","."]
,["6",".",".","1","9","5",".",".","."]
,[".","9","8",".",".",".",".","6","."]
,["8",".",".",".","6",".",".",".","3"]
,["4",".",".","8",".","3",".",".","1"]
,["7",".",".",".","2",".",".",".","6"]
,[".","6",".",".",".",".","2","8","."]
,[".",".",".","4","1","9",".",".","5"]
,[".",".",".",".","8",".",".","7","9"]]
输出：true
示例 2：

输入：board = 
[["8","3",".",".","7",".",".",".","."]
,["6",".",".","1","9","5",".",".","."]
,[".","9","8",".",".",".",".","6","."]
,["8",".",".",".","6",".",".",".","3"]
,["4",".",".","8",".","3",".",".","1"]
,["7",".",".",".","2",".",".",".","6"]
,[".","6",".",".",".",".","2","8","."]
,[".",".",".","4","1","9",".",".","5"]
,[".",".",".",".","8",".",".","7","9"]]
输出：false
解释：除了第一行的第一个数字从 5 改为 8 以外，空格内其他数字均与 示例1 相同。 但由于位于左上角的 3x3 宫内有两个 8 存在, 因此这个数独是无效的。
 */

const isValidSudoku = function (board) {
  const row = new Array(9).fill(new Array(9).fill(0));
  const col = new Array(9).fill(new Array(9).fill(0));
  const box = new Array(9).fill(new Array(9).fill(0));
  const boxIndex = (x, y) => {
    const boxRow = Math.floor(x / 3); // 九宫格行索引
    const boxCol = Math.floor(y / 3); // 九宫格列索引
    return boxRow * 3 + boxCol; // 九宫格索引
  };
  for (let i = 0; i < 9; i++) {
    for (let j = 0; j < 9; j++) {
      const curr = Number(board[i][j]);

      if (board[i][j] === ".") continue;
      else if (
        row[i][curr - 1] ||
        col[curr - 1][j] ||
        box[boxIndex(i, j)][curr - 1]
      ) {
        return false;
      }
      row[i][curr - 1] = 1;
      col[curr - 1][j] = 1;
      box[boxIndex(i, j)][curr - 1] = 1;
    }
  }
  return true;
};
const board = [
  ["5", "3", ".", ".", "7", ".", ".", ".", "."],
  ["6", ".", ".", "1", "9", "5", ".", ".", "."],
  [".", "9", "8", ".", ".", ".", ".", "6", "."],
  ["8", ".", ".", ".", "6", ".", ".", ".", "3"],
  ["4", ".", ".", "8", ".", "3", ".", ".", "1"],
  ["7", ".", ".", ".", "2", ".", ".", ".", "6"],
  [".", "6", ".", ".", ".", ".", "2", "8", "."],
  [".", ".", ".", "4", "1", "9", ".", ".", "5"],
  [".", ".", ".", ".", "8", ".", ".", "7", "9"],
];

console.log(isValidSudoku(board));
